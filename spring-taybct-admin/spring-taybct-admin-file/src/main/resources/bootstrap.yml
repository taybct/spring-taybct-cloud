swagger:
  title: 文件管理模块
# Spring
spring:
  main:
    #springCloud 的2.1.0以上版本的，将不再默认支持 FeignClient 的name属性 的相同名字。
    #即 ：多个接口上的@FeignClient(“相同服务名”)会报错，overriding is disabled(覆盖 是 禁止的/关闭的)。
    allow-bean-definition-overriding: true
  application:
    # 应用名称
    name: admin-file
  profiles:
    active: dev
  config:
    # 导入配置
    # optional: 可选，如果不设置这个在拉取nacos配置异常时会快速失败，会导致 spring 容器启动失败
    # group: 指定 group 覆盖默认 group
    # refreshEnabled: 是否开启动态刷新
    import:
      - optional:nacos:taybct.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 基本配置
      - optional:nacos:taybct-global-exception.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 全局异常配置
#      - optional:nacos:taybct-swagger.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # swagger 配置
      - optional:nacos:taybct-mq.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # rabbit mq 配置
      - optional:nacos:taybct-redis.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # redis 缓存
      - optional:nacos:taybct-datasource.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 数据源
      - optional:nacos:taybct-mybatis.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # mybatis-plus 配置
      - optional:nacos:taybct-file.yml?group=${spring.cloud.nacos.config.group}&refreshEnabled=true # 文件 配置
  # 环境配置
  cloud:
    # 使用 nacos 注册发现和配置
    nacos:
      username: nacos
      password: nacos
      discovery:
        # 服务注册地址
        server-addr: 127.0.0.1:8848
        # 命名空间
        namespace: taybct-3-5-x
        # 配置分组
        group: ${spring.profiles.active}
      config:
        # 服务注册地址
        server-addr: 127.0.0.1:8848
        # 命名空间
        namespace: taybct-3-5-x
        # 配置分组
        group: ${spring.profiles.active}
        # 配置文件格式
        file-extension: yml
taybct:
  tenant:
    tenant-tables:
      - sys_file
  scheduled:
    pool-size: 20
    await-termination-seconds: 60
    thread-name-prefix: "Scheduler-"
    wait-for-tasks-to-complete-on-shutdown: true
    tasks:
      cleanNotLinkedFile:
        task-key: cleanNotLinkedFile
        # 每天 0 点清理无效文件
        cron: 0 0 0 * * ?
        description: "清理无效的文件"
        auto-start: 1
        sort: 1
        params:
          "tenantId": "000000"
          # 每次查询清理的条数，分页大小
          "limit": 999
# springdoc-openapi 配置
springdoc:
  # API文档的基本信息
  info:
    title: 应用接口文档
    description: 这是应用的API接口文档，提供所有可用接口的详细信息
    version: v1.0.0
    contact:
      name: 开发者
      email: developer@example.com
    license:
      name: Apache 2.0
      url: https://www.apache.org/licenses/LICENSE-2.0.html

  # Swagger UI 配置
  swagger-ui:
    # 自定义Swagger UI路径
    path: /swagger-ui.html
    # 页面标题
    title: 接口文档 - ${spring.application.name}
    # 默认展开的操作数量
    doc-expansion: none
    # 支持的OAuth流
    supported-oauth-flows: implicit
    # 启用深链接
    deep-linking: true
    # 显示请求持续时间
    display-request-duration: true
    tags-sorter: alpha
    operations-sorter: alpha

  # API文档的路径匹配规则
  api-docs:
    # 自定义API文档JSON路径
    path: /v3/api-docs
    # 启用API文档
    enabled: true
    # 格式化输出
    format: openapi
  show-actuator: true
  # 扫描的包路径，指定需要生成文档的控制器所在包
  #packages-to-scan: io.github.mangocrisp.spring.taybct
  # 需要排除的类
  #packages-to-exclude: com.example.controller.internal
  # 需要生成文档的路径匹配
  #paths-to-match: /**
  # 需要排除的路径
  #paths-to-exclude: /error,/actuator/**

  # 全局参数配置，如认证token等
  global-request-parameters:
    - name: Authorization
      description: 认证token (Bearer token)
      in: header
      required: false
      schema:
        type: string
        example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

  # 全局响应参数配置
  global-responses:
    '401':
      description: 未授权访问
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 401
              message:
                type: string
                example: 请先登录
    '403':
      description: 权限不足
    '500':
      description: 服务器内部错误
  # 文档分组配置（如果需要多组文档）
  group-configs:
    - group: default
      packages-to-scan: io.github.mangocrisp.spring.taybct
      paths-to-match: /**
      display-name: ${springdoc.info.title}